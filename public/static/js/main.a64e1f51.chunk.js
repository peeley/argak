(this.webpackJsonppainterly=this.webpackJsonppainterly||[]).push([[0],{11:function(e,t,r){e.exports=r(28)},16:function(e,t,r){},28:function(e,t,r){"use strict";r.r(t);var o=r(0),n=r.n(o),i=r(8),s=r.n(i),a=r(2),l=r(3),c=r(5),h=r(4),u=r(1),d=r(6),v=(r(16),r(17),r(9)),f=r.n(v),p=function(e){function t(e){var r;return Object(a.a)(this,t),(r=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleColorChange=r.handleColorChange.bind(Object(u.a)(r)),r.handleStrokeWidthChange=r.handleStrokeWidthChange.bind(Object(u.a)(r)),r.componentDidMount=r.componentDidMount.bind(Object(u.a)(r)),r.state={strokeWidth:3,color:"#42445A"},r}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.palette=f.a.create({el:".colorPalette",theme:"nano",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 0.95)","rgba(156, 39, 176, 0.9)","rgba(103, 58, 183, 0.85)","rgba(63, 81, 181, 0.8)","rgba(33, 150, 243, 0.75)","rgba(3, 169, 244, 0.7)","rgba(0, 188, 212, 0.7)","rgba(0, 150, 136, 0.75)","rgba(76, 175, 80, 0.8)","rgba(139, 195, 74, 0.85)","rgba(205, 220, 57, 0.9)","rgba(255, 235, 59, 0.95)","rgba(255, 193, 7, 1)"],components:{preview:!0,opacity:!0,hue:!0,interaction:{input:!0,clear:!0,save:!0}}}),this.palette.on("save",(function(t,r){e.palette.hide(),e.handleColorChange(t,r)})),this.props.updateStrokeWidth(this.state.strokeWidth)}},{key:"handleColorChange",value:function(e,t){this.setState({color:e.toRGBA().toString()}),this.props.updateColor(this.state.color)}},{key:"handleStrokeWidthChange",value:function(e){this.setState({strokeWidth:e.target.value}),this.props.updateStrokeWidth(this.state.strokeWidth),e.preventDefault()}},{key:"render",value:function(){return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"border border-dark"},n.a.createElement("div",{className:"colorPalette"})),n.a.createElement("div",{className:"strokeWidthSlider pt-2 pl-3 pr-5"},n.a.createElement("input",{type:"range",min:"1",max:"30",className:"slider",value:this.state.strokeWidth,onChange:this.handleStrokeWidthChange})))}}]),t}(n.a.Component),k=function(){function e(t){Object(a.a)(this,e),this.strokeType=t,this.mouseDown=!1,this.color="#42445A",this.currentStroke={type:this.strokeType,indicator:!1,color:this.color,strokeWidth:1,coords:[]},this.setColor=this.setColor.bind(this),this.getColor=this.getColor.bind(this),this.setStrokeWidth=this.setStrokeWidth.bind(this),this.getStrokeWidth=this.getStrokeWidth.bind(this),this.setOffsets=this.setOffsets.bind(this),this.resetStroke=this.resetStroke.bind(this)}return Object(l.a)(e,[{key:"resetStroke",value:function(){this.currentStroke={type:this.strokeType,color:this.getColor(),strokeWidth:this.getStrokeWidth()}}},{key:"setOffsets",value:function(e){var t=e.current.getBoundingClientRect();this.topOffset=t.top,this.leftOffset=t.left}},{key:"setColor",value:function(e){this.color=e,this.currentStroke.color=this.color}},{key:"getColor",value:function(){return this.color}},{key:"setStrokeWidth",value:function(e){this.strokeWidth=e,this.currentStroke.strokeWidth=this.strokeWidth}},{key:"getStrokeWidth",value:function(){return this.strokeWidth}},{key:"handleEvent",value:function(e,t){}}]),e}(),b=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this,"pen"))).toolName="pen",e.handleEvent=e.handleEvent.bind(Object(u.a)(e)),e.strokeWidth=3,e.joinType="round",e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleEvent",value:function(e,t){var r=e.clientX-this.leftOffset,o=e.clientY-this.topOffset;if("mousedown"===e.type)this.mouseDown=!0,t.save(),t.beginPath(),t.lineCap="round",t.lineJoin=this.joinType,t.strokeStyle=this.color,t.moveTo(r,o),this.currentStroke.coords=[[r,o]];else{if(("mouseup"===e.type||"mouseleave"===e.type)&&this.mouseDown){this.mouseDown=!1;var n=this.currentStroke;return n.indicator=!1,this.resetStroke(),n}if(this.mouseDown&&"mousemove"===e.type){t.lineWidth=this.strokeWidth,t.lineTo(r,o),this.currentStroke.coords.push([r,o]);var i=this.currentStroke;return i.indicator=!0,i}}}}],[{key:"redoStroke",value:function(e,t){var r=e.color,o=e.strokeWidth,n=e.coords[0];t.save(),t.strokeStyle=r,t.lineWidth=o,t.beginPath(),t.moveTo(n[0],n[1]);var i=!0,s=!1,a=void 0;try{for(var l,c=e.coords.slice(1)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var h=l.value;t.lineTo(h[0],h[1])}}catch(u){s=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(s)throw a}}t.stroke(),t.restore()}}]),t}(k),m=r(10),y=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this,"rect"))).toolName="rect",e.startX=null,e.startY=null,e.mouseDown=!1,e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleEvent",value:function(e,t){if("mousedown"===e.type)t.beginPath(),this.mouseDown=!0,this.startX=e.clientX-this.leftOffset,this.startY=e.clientY-this.topOffset,this.currentStroke.coords=[this.startX,this.startY];else if("mouseup"===e.type||this.mouseDown&&"mousemove"===e.type){t.fillStyle=this.color;var r=e.clientX-this.leftOffset-this.startX,o=e.clientY-this.topOffset-this.startY;t.fillRect(this.startX,this.startY,r,o),this.currentStroke.width=r,this.currentStroke.height=o;var n=this.currentStroke;return"mouseup"===e.type?(n.indicator=!1,this.resetStroke(),this.mouseDown=!1):n.indicator=!0,n}}}],[{key:"redoStroke",value:function(e,t){var r=e.color,o=Object(m.a)(e.coords,2),n=o[0],i=o[1],s=e.width,a=e.height;t.save(),t.fillStyle=r,t.fillRect(n,i,s,a),t.restore()}}]),t}(k),S=function(e){function t(e){var r;return Object(a.a)(this,t),(r=Object(c.a)(this,Object(h.a)(t).call(this,e))).toolSet={pen:new b,rect:new y},r.selectedTool=r.toolSet.pen,r.props.handleToolSelect(r.selectedTool),r.handleChange=r.handleChange.bind(Object(u.a)(r)),r.selectNewTool=r.selectNewTool.bind(Object(u.a)(r)),r.setStrokeWidth=r.setStrokeWidth.bind(Object(u.a)(r)),r.setColor=r.setColor.bind(Object(u.a)(r)),r.state={selectedName:"pen"},r}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){if(this.props.surface.current)for(var t in this.toolSet)this.toolSet[t].setOffsets(this.props.surface)}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({selectedName:t}),this.selectNewTool(t)}},{key:"selectNewTool",value:function(e){this.selectedTool=this.toolSet[e],this.props.handleToolSelect(this.selectedTool)}},{key:"setStrokeWidth",value:function(e){this.selectedTool.setStrokeWidth(e)}},{key:"setColor",value:function(e){for(var t in this.toolSet)this.toolSet[t].setColor(e)}},{key:"render",value:function(){return n.a.createElement("div",{className:"row controlBar"},n.a.createElement(p,{updateStrokeWidth:this.setStrokeWidth,updateColor:this.setColor}),n.a.createElement("div",{className:"border border-dark row toolList pt-2"},n.a.createElement("div",{className:"pr-3"},n.a.createElement("input",{type:"radio",value:"pen",id:"pen",checked:"pen"===this.state.selectedName,onChange:this.handleChange}),n.a.createElement("label",{htmlFor:"pen"}," Pen ")),n.a.createElement("div",{className:"pr-5"},n.a.createElement("input",{type:"radio",value:"rect",id:"rect",checked:"rect"===this.state.selectedName,onChange:this.handleChange}),n.a.createElement("label",{htmlFor:"rect"}," Rect "))))}}]),t}(n.a.Component),w=function(){function e(){Object(a.a)(this,e),this.versionHistory=[],this.currentVersion=0,this.undo=this.undo.bind(this),this.redo=this.redo.bind(this),this.redrawCanvas=this.redrawCanvas.bind(this),this.wipeHistory=this.wipeHistory.bind(this)}return Object(l.a)(e,[{key:"push",value:function(e){this.currentVersion!==this.versionHistory.length&&(this.versionHistory=this.versionHistory.slice(0,this.currentVersion)),this.versionHistory.push(e),this.currentVersion+=1}},{key:"undo",value:function(e){this.currentVersion>0&&(this.currentVersion-=1,this.redrawCanvas(e))}},{key:"redo",value:function(e){this.currentVersion<this.versionHistory.length&&(this.currentVersion+=1,this.redrawCanvas(e))}},{key:"wipeHistory",value:function(){this.versionHistory=[],this.currentVersion=0}},{key:"redrawCanvas",value:function(e){var t=e.current.getContext("2d"),r=1,o=t.canvas.width,n=t.canvas.height;for(t.clearRect(0,0,o,n);r<=this.currentVersion;){var i=this.versionHistory[r-1];switch(i.type){case"pen":b.redoStroke(i,t);break;case"rect":y.redoStroke(i,t);break;default:console.log("unknown stroke type")}i.indicator?(this.versionHistory.splice(r-1,1),this.currentVersion-=1):r+=1}}}]),e}(),C=function(e){function t(e){var r;return Object(a.a)(this,t),(r=Object(c.a)(this,Object(h.a)(t).call(this,e))).handleInput=r.handleInput.bind(Object(u.a)(r)),r.handleToolSelect=r.handleToolSelect.bind(Object(u.a)(r)),r.versionController=new w,r.clearCanvas=r.clearCanvas.bind(Object(u.a)(r)),r.state={tool:null,drawSurface:n.a.createRef()},r}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){if(t.ctrlKey)switch(t.key){case"z":e.versionController.undo(e.state.drawSurface);break;case"y":e.versionController.redo(e.state.drawSurface)}}))}},{key:"handleToolSelect",value:function(e){this.setState({tool:e})}},{key:"handleInput",value:function(e){var t=this.state.drawSurface.current.getContext("2d"),r=this.state.tool.handleEvent(e,t);null!=r&&(this.versionController.push(r),this.clearCanvas(),this.versionController.redrawCanvas(this.state.drawSurface)),e.preventDefault()}},{key:"clearCanvas",value:function(){var e=this.state.drawSurface.current.getContext("2d"),t=e.canvas.width,r=e.canvas.height;e.clearRect(0,0,t,r)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container col px-5 Canvas"},n.a.createElement("div",{className:"row pl-5"},n.a.createElement(S,{surface:this.state.drawSurface,handleToolSelect:this.handleToolSelect}),n.a.createElement("div",{className:"versionButtons pt-2 pl-5"},n.a.createElement("button",{onClick:function(t){e.versionController.undo(e.state.drawSurface)}},"Undo"),n.a.createElement("button",{onClick:function(t){e.versionController.redo(e.state.drawSurface)}},"Redo"),n.a.createElement("button",{onClick:function(t){e.clearCanvas(),e.versionController.wipeHistory()}},"Clear"))),n.a.createElement("canvas",{className:"row",id:"drawSurface",onMouseDown:this.handleInput,onMouseMove:this.handleInput,onMouseLeave:this.handleInput,onMouseUp:this.handleInput,height:.9*window.innerHeight,width:.95*window.innerWidth,ref:this.state.drawSurface}))}}]),t}(n.a.Component);var g=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.a64e1f51.chunk.js.map